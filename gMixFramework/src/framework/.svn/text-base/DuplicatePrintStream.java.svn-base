package framework;

import java.io.PrintStream;


// printstream that writes all data provided to it to two printstreams (= duplicates the stream)
public class DuplicatePrintStream extends PrintStream {

	private PrintStream outputStream2;
	private String prefix;
	
	
	public DuplicatePrintStream(PrintStream outputStream1,
			PrintStream outputStream2, boolean isErrorStream) {
		
		super(outputStream1);
		this.outputStream2 = outputStream2;
		this.prefix = isErrorStream ? "ERROR:" : "";
		
	}

	
	@Override
	public void write(byte buf[], int off, int len) {

		try {
			
			super.write(buf, off, len);
			outputStream2.write(buf, off, len);
			
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}

	
	@Override
	public void flush() {
		
		super.flush();
		outputStream2.flush();
		
	}

	
	@Override
	public void println(String s) {
		super.println(prefix + System.currentTimeMillis() + ": " + s);
	}

}